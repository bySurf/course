<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Opportunities · bySurf</title>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@700&family=Roboto+Mono:wght@700&display=swap" rel="stylesheet">
  <style>
    :root { color-scheme: dark; --bg:#0f0f0f; --fg:#fff; --border:rgba(255,255,255,.12); --panel:rgba(255,255,255,.06); --panel-hover:rgba(255,255,255,.1); --tag-bg:rgba(255,255,255,.1); --btn:#009dff; }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--fg)}

    /* Typography */
    .title-font{font-family:Inter,ui-sans-serif,system-ui;font-weight:700}
    .mono{font-family:"Roboto Mono",ui-monospace,monospace;font-weight:700}
    h1,h2,h3{letter-spacing:-.01em}

    /* Layout */
    .container{max-width:1120px;margin:0 auto;padding:0 1rem}
    header.site{padding:2.5rem 0 1rem}
    .title{font-size:clamp(1.75rem,2.5vw,2.5rem);line-height:1.1;margin:0}
    .subtitle{font-size:.875rem;opacity:.8;margin-top:.25rem}
    .desc{margin-top:1rem;max-width:60ch;opacity:.9}

    /* Grid */
    .grid{display:grid;grid-template-columns:1fr;gap:1rem;margin-top:2rem}
    @media(min-width:640px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media(min-width:1024px){.grid{grid-template-columns:repeat(3,1fr)}}
    .grid.empty{min-height:50vh;display:grid;place-items:center}

    /* Card */
    .card{border:1px solid var(--border);background:var(--panel);border-radius:1rem;padding:1.25rem;display:flex;flex-direction:column;transition:background .2s}
    .card:hover{background:var(--panel-hover)}
    .job-title{font-size:1.125rem;margin:0}
    .tags{margin-top:.75rem;display:flex;flex-wrap:wrap;gap:.5rem}
    .tag{display:inline-flex;align-items:center;gap:.35rem;padding:.34rem .64rem;border-radius:999px;border:1px solid var(--border);background:var(--tag-bg);font-size:.75rem}

    /* Buttons */
    .btn{background:var(--btn);color:#fff;border:0;border-radius:.85rem;padding:.6rem .95rem;display:inline-flex;align-items:center;gap:.5rem;cursor:pointer;text-decoration:none;box-shadow:0 6px 14px rgba(0,157,255,.28);transition:filter .15s}
    .btn:hover{filter:brightness(1.1)}
    .btn:active{filter:brightness(.95)}
    .btn.small{margin-top:1rem;align-self:flex-end}
    .btn.block{margin-top:1.5rem;width:100%;justify-content:center;padding:.9rem 1.1rem;border-radius:1rem}

    /* States */
    .state{text-align:center;opacity:.8;padding:4rem 0}

    /* Modal — animated */
    .backdrop{position:fixed;inset:0;background:rgba(0,0,0,.6);backdrop-filter:blur(2px);opacity:0;visibility:hidden;transition:opacity .25s ease, visibility .25s ease}
    .backdrop.open{opacity:1;visibility:visible}

    .modal{position:fixed;inset:0;display:grid;place-items:center;padding:1rem;pointer-events:none;opacity:0;visibility:hidden;transition:opacity .25s ease, visibility .25s ease}
    .modal.open{opacity:1;visibility:visible;pointer-events:auto}

    .modal-card{width:100%;max-width:860px;border:1px solid var(--border);background:#121212;border-radius:1.25rem;padding:1.25rem;box-shadow:0 24px 80px rgba(0,0,0,.6);transform:translateY(16px) scale(.98);opacity:0;transition:transform .35s cubic-bezier(.2,.8,.2,1), opacity .35s ease}
    .modal.open .modal-card{transform:none;opacity:1}

    @media(min-width:640px){.modal-card{padding:1.75rem}}
    @media(min-width:1024px){.modal-card{padding:2rem}}

    .modal-header{display:flex;align-items:center;gap:.75rem;margin-bottom:1rem}
    .modal-title{font-size:clamp(1.4rem,2.2vw,1.9rem);margin:0}
    .spacer{flex:1}

    .icon-btn{background:transparent;border:0;color:inherit;border-radius:.6rem;padding:.45rem;cursor:pointer}
    .icon-btn:hover{background:rgba(255,255,255,.06)}

    /* Modal content spacing to reduce crammed look */
    .section{margin-top:1rem}
    .section + .section{margin-top:1.25rem}
    .section-title{margin:0 0 .5rem;font-size:1.05rem;opacity:.95}
    .lead{line-height:1.6}
    .list{margin:.25rem 0 0;padding-left:1.15rem}
    .list li{margin:.25rem 0}

    /* soft dividers */
    .divider{height:1px;background:linear-gradient(90deg,transparent,rgba(255,255,255,.08),transparent);margin:1rem 0}

    footer{padding:2rem 0;text-align:center;opacity:.6}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>
</head>
<body>
  <main>
    <div class="container">
      <header class="site">
        <h1 class="title title-font">Opportunities</h1>
        <p class="subtitle mono" style="max-width: 65%;">As we grow our channel and try to create the best content on internet oddities, we're also looking for talented people to join the team!</p>
      </header>
      <p class="desc mono">Open Positions</p>

      <section id="jobsGrid" class="grid empty" aria-live="polite"></section>

      <footer class="mono">© <span id="year"></span> bySurf / <a href="https://www.studiobysurf.com/impressum" target="_blank">Impressum</a></footer>
    </div>
  </main>

  <!-- Backdrop + Modal -->
  <div id="backdrop" class="backdrop" aria-hidden="true"></div>
  <div id="modal" class="modal" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modal-header">
        <h2 id="modalTitle" class="modal-title title-font"></h2>
        <div class="spacer"></div>
        <button id="closeModal" class="icon-btn" aria-label="Close">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M6 6l12 12M18 6 6 18"/></svg>
        </button>
      </div>
      <div id="modalTags" class="tags"></div>
      <div class="divider"></div>
      <div id="modalBody" class="section"></div>
      <div id="modalRateWrap" class="section"></div>
      <div id="modalReqs" class="section"></div>
      <div id="modalAppReqs" class="section"></div>
      <a class="btn block mono" href="mailto:hello@studiobysurf.com">Apply</a>
    </div>
  </div>

  <script>
    const DATA_URL = 'https://bysurf.github.io/course/jobs.json';

    const els = {
      grid: document.getElementById('jobsGrid'),
      year: document.getElementById('year'),
      backdrop: document.getElementById('backdrop'),
      modal: document.getElementById('modal'),
      closeModal: document.getElementById('closeModal'),
      modalTitle: document.getElementById('modalTitle'),
      modalTags: document.getElementById('modalTags'),
      modalBody: document.getElementById('modalBody'),
      modalRateWrap: document.getElementById('modalRateWrap'),
      modalReqs: document.getElementById('modalReqs'),
      modalAppReqs: document.getElementById('modalAppReqs'),
    };

    els.year.textContent = new Date().getFullYear();

    function tagIcon(){return '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M20.59 13.41 12 22l-9-9V4h9l8.59 8.59Z"/><circle cx="7.5" cy="7.5" r="1.5"/></svg>'}
    function externalIcon(){return '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M14 3h7v7M10 14 21 3M21 10v11H3V3h11"/></svg>'}
    function createTag(text){const s=document.createElement('span');s.className='tag mono';s.innerHTML=tagIcon()+" "+text;return s}
    function normalizeTags(tags){if(Array.isArray(tags))return tags;if(typeof tags==='string')return tags.split(',').map(s=>s.trim()).filter(Boolean);return[]}

    function stateEl(text){const d=document.createElement('div');d.className='state mono';d.textContent=text;return d}

    function createCard(job){
      const card=document.createElement('article');card.className='card';
      const h=document.createElement('h3');h.className='job-title title-font';h.textContent=job.title||'Untitled';card.appendChild(h);
      const tags=document.createElement('div');tags.className='tags';normalizeTags(job.tags).forEach(t=>tags.appendChild(createTag(t)));card.appendChild(tags);
      const btn=document.createElement('button');btn.className='btn small mono';btn.innerHTML='Learn more '+externalIcon();btn.addEventListener('click',()=>openModal(job));card.appendChild(btn);
      return card;
    }

    async function loadJobs(){
      els.grid.classList.add('empty');
      els.grid.innerHTML='';
      els.grid.appendChild(stateEl('Loading roles…'));
      try {
        const res=await fetch(DATA_URL,{cache:'no-store'});
        if(!res.ok) throw new Error();
        const data=await res.json();
        const jobs=Array.isArray(data)?data:(Array.isArray(data.jobs)?data.jobs:(data&&typeof data==='object'?[data]:[]));
        els.grid.innerHTML='';
        if(!jobs.length){els.grid.classList.add('empty');els.grid.appendChild(stateEl('No positions posted yet. Check back soon.'));return}
        els.grid.classList.remove('empty');
        jobs.forEach(j=>els.grid.appendChild(createCard(j)));
      } catch(e){
        els.grid.classList.add('empty');
        els.grid.innerHTML='';
        els.grid.appendChild(stateEl("Couldn't load jobs yet. Please verify your JSON URL."));
      }
    }

    // Modal controls with animation classes
    let lastFocus=null;
    function openModal(job){
      lastFocus=document.activeElement;
      // Fill content first
      els.modalTitle.textContent=job.title||'Job';
      els.modalTags.innerHTML='';
      normalizeTags(job.tags).forEach(t=>els.modalTags.appendChild(createTag(t)));

      els.modalBody.innerHTML='';
      if(job.description){
        const wrap=document.createElement('div');wrap.className='section';
        wrap.innerHTML='<h3 class="section-title title-font">Job description</h3>'+
                        '<p class="mono lead">'+job.description+'</p>';
        els.modalBody.replaceWith(wrap); els.modalBody=wrap; // keep ref
      }

      els.modalRateWrap.innerHTML='';
      if(job.rate){
        els.modalRateWrap.innerHTML='<h3 class="section-title title-font">Rate</h3>'+
                                    '<p class="mono lead" style="margin-top:.25rem">'+job.rate+'</p>';
      }

      els.modalReqs.innerHTML='';
      if(job.requirements&&job.requirements.length){
        els.modalReqs.innerHTML='<h3 class="section-title title-font">Requirements</h3>'+
                                '<ul class="list mono">'+job.requirements.map(r=>'\n<li>'+r+'</li>').join('')+'\n</ul>';
      }

      els.modalAppReqs.innerHTML='';
      if(job.application_requirements&&job.application_requirements.length){
        els.modalAppReqs.innerHTML='<h3 class="section-title title-font">Application Requirements</h3>'+
                                   '<ul class="list mono">'+job.application_requirements.map(r=>'\n<li>'+r+'</li>').join('')+'\n</ul>';
      }

      // Show with animation
      els.backdrop.classList.add('open');
      els.modal.classList.add('open');
      document.body.style.overflow='hidden';
      els.closeModal.focus();
    }

    function closeModal(){
      els.backdrop.classList.remove('open');
      els.modal.classList.remove('open');
      document.body.style.overflow='';
      if(lastFocus) lastFocus.focus();
    }

    els.backdrop.addEventListener('click',closeModal);
    els.closeModal.addEventListener('click',closeModal);
    window.addEventListener('keydown',(e)=>{ if(e.key==='Escape') closeModal(); });

    loadJobs();
  </script>
</body>
</html>
